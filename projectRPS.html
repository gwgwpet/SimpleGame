<!DOCTYPE html>
<html>
    <head>
    <meta charset="UTF-8">
    <title>Page Title</title>
    </head>
    <body>
        <script>
            let ComputerChoice; //The string version. e.g 'Rock'
            let ComputerChoiceInt; //The int version. e.g 0
            
            let UserChoice;
            let UserChoiceInt;
            
            let Userscore = 0;
            let Compscore = 0;

            let i; //for round calculation

            function getRandomInt(max) 
            {
                /*
                 * Returns a random integer from 0 to 2
                 * illustration:
                 *      0 -> Rock
                 *      1 -> Paper
                 *      2 -> Scissors
                 * */
                return Math.floor(Math.random()*max);
            }

            function getComputerChoice()
            {
                /*
                 * Firstly, it calculates the computer's choice by getting a random number
                 * and it assigns the int version and the string version to the appropriate variables. 
                 * 
                 * */
                let choice = getRandomInt(3);
                if (choice == 0)
                {
                    ComputerChoice = 'Rock';
                }
                else if (choice == 1)
                {
                    ComputerChoice = 'Paper';
                }
                else
                {
                    ComputerChoice = 'Scissors';
                }
                ComputerChoiceInt = choice;
                
                // For checking if the code works well.
                //console.log("Computer Choice: "+ComputerChoice+"\n"); 

                return ComputerChoice;
            }
            
            function calcWinner()
            {
                /*
                 * Returns 'user'  if the winner is the User,
                 * 'computer' if the winner is the Computer
                 * 'draw' if it's a draw.
                 */
                if (ComputerChoiceInt == 0)
                {
                    if (UserChoiceInt == 0) return "draw"; 
                    else if (UserChoiceInt == 1) 
                    {
                        ++Userscore;
                        return "user";
                    }
                    else 
                    {
                        ++Compscore;
                        return "computer";
                    }
                }
                else if (ComputerChoiceInt == 1)
                {
                    if (UserChoiceInt == 0) 
                    {
                        ++Compscore;
                        return "computer"; 
                    }
                    else if (UserChoiceInt == 1) return "draw";
                    else 
                    {
                        ++Userscore;
                        return "user";
                    }
                }
                else // (ComputerChoiceInt == 2)
                {
                    if (UserChoiceInt == 0) 
                    {
                        ++Userscore;
                        return "user";
                    } 
                    else if (UserChoiceInt == 1) 
                    {
                        ++Compscore;
                        return "computer";
                    }
                    else return "draw";
                }
                
            }

            function getUserChoice()
            {
                let input;
                /*
                 * It takes from the console the User's choice
                 * then it assigns the int version and string version
                 * to the appropriate variables  
                 * and it prints the choice in the console. 
                 */

                //Checking for valid user's input
                
                let flag = 0;

                while (flag == 0)
                {
                    input = prompt("Round "+i+"\nPlease select your choice.\nFor Rock type 0,\nFor Paper type 1,\nFor Scissors type 2 ");
                    input = parseInt(input);
                    if (input == 0 || input == 1|| input==2 )
                    {
                        flag = 1;
                    }
                }

                UserChoiceInt = input;
                
                if (input == 0) UserChoice = 'Rock';
                else if(input==1) UserChoice = 'Paper';
                else UserChoice = 'Scissors';
                
                console.log('Your choise is '+UserChoice);
            }

            function playRound(playerSelection, computerSelection) 
            {
                let winner = calcWinner();
                if (winner == "draw")
                {
                    console.log("It's a draw! You both have chosen "+ ComputerChoice);
                    return;
                }
                else if (winner == "user")
                {
                    console.log("The winner of the round "+i+" is the "+winner+". Congratulations!\n The "+UserChoice+" beats the "+ComputerChoice);

                }
                else
                {
                    console.log("The winner of the round "+i+" is the "+winner+". Maybe next time you will win!\n The "+ComputerChoice+" beats the "+UserChoice);
                }
            }

            function game()
            {
                let c; //for computer choice
                let u; //for user choice
                for(i = 1; i<6; i++)
                {
                    c = getComputerChoice();
                    u = getUserChoice();
                    playRound(u,c);
                }
    
                if (Compscore>Userscore) console.log('The winner of the whole game is the Computer. The score is\t'+Compscore+' - '+Userscore+'\tfor the Computer.');
                else if (Compscore<Userscore) console.log('The winner of the whole game is the User. The score is\t'+Userscore+' - '+Compscore+'\tfor the User.');
                else 
                {
                    console.log("It's a draw... The score is:\t"+Userscore+' - '+Compscore);
                }
            }
            
            game();
            
            
        </script>
    
    

    </body>
</html>